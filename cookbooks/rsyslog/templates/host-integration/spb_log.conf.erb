# TODO: configure gitlab to send logs to syslog directly
# Configuration to forward GitLab logs
$ModLoad imfile
# Unicor Error
$InputFileName /var/log/gitlab/unicorn.stderr.log
$InputFileTag gitlab-unicorerr
$InputFileStateFile gitlab-unicor
$InputFileSeverity 'error'
$InputFileFacility gitlabunicorerr
$InputRunFileMonitor

# Unicor Out
$InputFileName /var/log/gitlab/unicorn.stdout.log
$InputFileTag gitlab-unicorout
$InputFileStateFile gitlab-unicoroutlog
$InputFileSeverity 'info'
$InputFileFacility gitlabunicorout
$InputRunFileMonitor

# Applications log
$InputFileName /var/log/gitlab/application.log
$InputFileTag gitlab-app
$InputFileStateFile gitlab-applog
$InputFileSeverity 'info'
$InputFileFacility gitlabapp
$InputRunFileMonitor

# Production logs
$InputFileName /var/log/gitlab/production.log
$InputFileTag gitlab-prod
$InputFileStateFile gitlab-prodlog
$InputFileSeverity 'info'
$InputFileFacility gitlabprod
$InputRunFileMonitor

# Sidekiq logs
$InputFileName /var/log/gitlab/sidekiq.log
$InputFileTag gitlab-sidekiq
$InputFileStateFile gitlab-sidekiqlog
$InputFileSeverity 'info'
$InputFileFacility gitlabsidekiq
$InputRunFileMonitor

# Shell logs
$InputFileName /var/log/gitlab-shell/gitlab-shell.log
$InputFileTag gitlab-shell
$InputFileStateFile gitlab-shelllog
$InputFileSeverity 'info'
$InputFileFacility gitlabshell
$InputRunFileMonitor

# Sending <%= node.name %> logs
*.*                                                     @@<%= node['peers']['monitor'] %>
